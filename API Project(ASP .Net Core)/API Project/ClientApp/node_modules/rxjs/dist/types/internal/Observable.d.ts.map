 objects");return o.fullPath=n,f.push(o)}f.push(r.mergeDeep(a,e));var i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.specmap,o=n.getBaseUrlForNodePath,a=void 0===o?function(e){var n;return r.getContext(s()(n=[]).call(n,q()(t),q()(e))).baseDoc}:o,i=n.targetKeys,u=void 0===i?["$ref","$$ref"]:i,l=[];return jt()(e).forEach((function(){if(b()(u).call(u,this.key)&&"string"==typeof this.node){var e=this.path,n=s()(t).call(t,this.path),o=Mt(this.node,a(e));l.push(r.replace(n,o))}})),l}(e,W()(n).call(n,0,-1),{getBaseUrlForNodePath:function(e){var o;return r.getContext(s()(o=[]).call(o,q()(n),[t],q()(e))).baseDoc},specmap:r});f.push.apply(f,q()(i))})),l.example)f.push(r.remove(s()(c=[]).call(c,a,"example")));if(f.push(r.mergeDeep(a,l)),!l.$$ref)f.push(r.remove(s()(p=[]).call(p,a,"$$ref")));return f}}}}},nn={key:"parameters",plugin:function(e,t,n,r){if(Array.isArray(e)&&e.length){var o=Ee()([],e),a=W()(n).call(n,0,-1),i=me()({},it.getIn(r.spec,a));return e.forEach((function(e,t){try{o[t].default=r.parameterMacro(i,e)}catch(e){var a=new Error(e);return a.fullPath=n,a}})),it.replace(n,o)}return it.replace(n,e)}},rn={key:"properties",plugin:function(e,t,n,r){var o=me()({},e);for(var a in e)try{o[a].default=r.modelPropertyMacro(o[a])}catch(e){var i=new Error(e);return i.fullPath=n,i}return it.replace(n,o)}};var on=function(){function e(t){ge()(this,e),this.root=an(t||{})}return be()(e,[{key:"set",value:function(e,t){var n=this.getParent(e,!0);if(n){var r=e[e.length-1],o=n.children;o[r]?sn(o[r],t,n):o[r]=an(t,n)}else sn(this.root,t,null)}},{key:"get",value:function(e){if((e=e||[]).length<1)return this.root.value;for(var t,n,r=this.root,o=0;o<e.length&&(n=e[o],(t=r.children)[n]);o+=1)r=t[n];return r&&r.protoValue}},{key:"getParent",value:function(e,t){return!e||e.length<1?null:e.length<2?this.root:W()(e).call(e,0,-1).reduce((function(e,n){if(!e)return e;var r=e.children;return!r[n]&&t&&(r[n]=an(null,e)),r[n]}),this.root)}}]),e}();function an(e,t){return sn({children:{}},e,t)}function sn(e,t,n){return e.value=t||{},e.protoValue=n?me()(me()({},n.protoValue),e.value):e.value,j()(e.children).forEach((function(t){var n=e.children[t];e.children[t]=sn(n,n.value,e)})),e}var un=function(){},ln=function(){function e(t){var n,r,o=this;ge()(this,e),Ee()(this,{spec:"",debugLevel:"info",plugins:[],pluginHistory:{},errors:[],mutations:[],promisedPatches:[],state:{},patches:[],context:{},contextTree:new on,showDebug:!1,allPatches:[],pluginProp:"specMap",libMethods:Ee()(Object.create(this),it,{getInstance:function(){return o}}),allowMetaPatches:!1},t),this.get=this._get.bind(this),this.getContext=this._getContext.bind(this),this.hasRun=this._hasRun.bind(this),this.wrappedPlugins=P()(n=C()(r=this.plugins).call(r,this.wrapPlugin.bind(this))).call(n,it.isFunction),this.patches.push(it.add([],this.spec)),this.patches.push(it.context([],this.context)),this.updatePatches(this.patches)}return be()(e,[{key:"debug",value:function(e){if(this.debugLevel===e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(t=console).log.apply(t,r)}}},{key:"verbose",value:function(e){if("verbose"===this.debugLevel){for(var t,n,r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=console).log.apply(t,s()(n=["[".concat(e,"]   ")]).call(n,o))}}},{key:"wrapPlugin",value:function(e,t){var n,r,o,a=this.pathDiscriminator,i=null;return e[this.pluginProp]?(i=e,n=e[this.pluginProp]):it.isFunction(e)?n=e:it.isObject(e)&&(r=e,o=function(e,t){return!Array.isArray(e)||e.every((function(e,n){return e===t[n]}))},n=p().mark((function e(t,n){var i,u,l,c,f,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d=function(e,t,l){var c,f,h,m,v,g,y,b,w,E,x,_,S;return p().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(it.isObject(e)){i.next=6;break}if(r.key!==t[t.length-1]){i.next=4;break}return i.next=4,r.plugin(e,r.key,t,n);case 4:i.next=30;break;case 6:c=t.length-1,f=t[c],h=t.indexOf("properties"),m="properties"===f&&c===h,v=n.allowMetaPatches&&u[e.$$ref],g=0,y=j()(e);case 12:if(!(g<y.length)){i.next=30;break}if(b=y[g],w=e[b],E=s()(t).call(t,b),x=it.isObject(w),_=e.$$ref,v){i.next=22;break}if(!x){i.next=22;break}return n.allowMetaPatches&&_&&(u[_]=!0),i.delegateYield(d(w,E,l),"t0",22);case 22:if(m||b!==r.key){i.next=27;break}if(S=o(a,t),a&&!S){i.next=27;break}return i.next=27,r.plugin(w,b,E,n,l);case 27:g++,i.next=12;break;case 30:case"end":return i.stop()}}),i)},i=p().mark(d),u={},l=h()(P()(t).call(t,it.isAdditiveMutation)),e.prev=4,l.s();case 6:if((c=l.n()).done){e.next=11;break}return f=c.value,e.delegateYield(d(f.value,f.path,f),"t0",9);case 9:e.next=6;break;case 11:e.next=16;break;case 13:e.prev=13,e.t1=e.catch(4),l.e(e.t1);case 16:return e.prev=16,l.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[4,13,16,19]])}))),Ee()(n.bind(i),{pluginName:e.name||t,isGenerator:it.isGenerator(n)})}},{key:"nextPlugin",value:function(){var e,t=this;return _e()(e=this.wrappedPlugins).call(e,(function(e){return t.getMutationsForPlugin(e).length>0}))}},{key:"nextPromisedPatch",value:function(){var e;if(this.promisedPatches.length>0)return ke().race(C()(e=this.promisedPatches).call(e,(function(e){return e.value})))}},{key:"getPluginHistory",value:function(e){v
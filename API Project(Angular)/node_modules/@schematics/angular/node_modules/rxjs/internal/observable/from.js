'use strict';

var test = require('tape');

var getSideChannel = require('../');

test('export', function (t) {
	t.equal(typeof getSideChannel, 'function', 'is a function');
	t.equal(getSideChannel.length, 0, 'takes no arguments');

	var channel = getSideChannel();
	t.ok(channel, 'is truthy');
	t.equal(typeof channel, 'object', 'is an object');

	t.end();
});

test('assert', function (t) {
	var channel = getSideChannel();
	t['throws'](
		function () { channel.assert({}); },
		TypeError,
		'nonexistent value throws'
	);

	var o = {};
	channel.set(o, 'data');
	t.doesNotThrow(functio